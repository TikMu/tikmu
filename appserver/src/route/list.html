<!DOCTYPE html>
<html>
	@ctx.aux.head.setData({ title : title }).execute()
	<script src="/js/advreq.js"></script>
	<body>
		@ctx.aux.menu.execute()
		<div>
			@for (q in questions)
			{ @{var u = this.getUser(q.user);}
			<article class="question_card" id="@q._id.valueOf()">
				<header class="question_card_header">
					<div class="user_avatar"></div>
					<div class="user_description">
						<div class="user_name">@u.name</div>
						<div class="user_reputation">302</div><!-- TODO -->
					</div>
				</header>
				<div class="question_card_question"><a href="/question/@q._id.valueOf()">@q.contents</a></div>
				<footer class="question_card_footer">
					<div class="location_date">@Std.random(10)km @Std.random(20)h</div><!-- TODO -->
					<div class="footer_icons">
						@if(ctx.loop.session.isAuthenticated()) {
						@{
							var favclass = "favorite icon";
							var folclass = "follow icon";
							if (q.state.favorite)
								favclass += " icon_pressed";
							if (q.state.following)
								folclass += " icon_pressed";
						}
						<a class="@favclass" question-id="@q._id.valueOf()">Favorite/unfavorite</a>
						<a class="@folclass" question-id="@q._id.valueOf()">Follow/unfavorite</a>
						}
					</div>
				</footer>	
				<div class="question_card_answers">
					@if (q.answers.length > 0)
					{
					<a href="/question/@q._id.valueOf()">@q.answers.length answers</a>
					}
					else
					{
					<a href="/question/@q._id.valueOf()">Answer</a>
					}
				</div>
			</article>
			}
		</div>
	</body>
</html>

